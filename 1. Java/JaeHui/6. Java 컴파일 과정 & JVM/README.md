# Java 컴파일 과정 & JVM

Java는 JVM(Java Virtual Machine)으로 인해 OS에 독립적인 특징을 가집니다.<br>
OS에 독립적으로 실행시킬 수 있는 Java의 컴파일 과정은 다음과 같습니다. <br>
<img src="./img/java compile.png" width="650"><br>
[사진 출처 및 참고 링크](http://asfirstalways.tistory.com/158)

1. 개발자가 자바 소스코드(.java)를 작성합니다.
2. 자바 컴파일러(Compiler)가 자바 소스파일을 컴파일하고 이때 자바 바이트 코드 파일(.class)이 생성됩니다. 이는 자바 가상 머신이 이해할 수 있는 코드로, 각 명령어는 1byte 크기의 Opcode와 추가 피연산자로 이루어집니다.
3. 바이트 코드를 JVM의 클래스 로더(Class Loader)로 전달합니다.
4. 클래스 로더는 동적 로딩(Dynamic Loading)을 통해 필요한 클래스들을 로딩 및 링크하여 런타임 데이터 영역(Runtime Data Area)인 JVM의 메모리에 올립니다.

```
💡 Class Loader 세부 동작
로드 : 클래스 파일을 가져와서 JVM의 메모리에 로드합니다.
검증 : 자바 언어 명세(Java Language Specification) 및 JVM 명세에 명시된 대로 구성되어 있는지 검사합니다.
준비 : 클래스가 필요로 하는 메모리를 할당합니다. (필드, 메서드, 인터페이스 등등)
분석 : 클래스의 상수 풀 내 모든 심볼릭 레퍼런스를 다이렉트 레퍼런스로 변경합니다.
초기화 : 클래스 변수들을 적절한 값으로 초기화합니다. (static 필드)
```

5. 실행엔진(Execution Engine)은 JVM 메모리에 올라온 바이트 코드들을 명령어 단위로 하나씩 가져와 실행합니다.

```
✅ 인터프리터
바이트 코드 명령어를 하나씩 읽어서 해석하고 실행하는 방식으로, 전체적인 실행 속도가 느리다는 단점을 가집니다.

✅ JIT(Just-In-Time) Compiler
인터프리터의 단점을 보완하기 위해 도입된 방식으로 바이트 코드 전체를 컴파일하여 바이너리 코드로 변경합니다.
이후에는 해상 메서드를 더 이상 인터프리팅하지 않고 바이너리 코드로 직접 실행하게 됩니다.
하나씩 인터프리팅하여 실행하는 것이 아니라 바이트 코드 전체가 컴파일된 바이너리 코드를 실행하는 것이기 때문에 전체적인 실행속도는 인터프리팅 방식보다 빠릅니다.
```
