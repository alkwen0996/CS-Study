# 운영체제와 컴퓨터

키워드: CPU, DMA컨트롤러, I/O 장치, 메모리, 시스템콜, 인터럽트, 커널
분류: 운영체제

<aside>
📒 **목차**

</aside>

<aside>
✅ **블로그 포스팅 목록**

- [ ]  
</aside>

# 운영체제

운영체제(OS: Operating System)란 사용자가 컴퓨터를 쉽게 다루게 해주는 **인터페이스**로, 한정된 메모리나 **자원을 효율적으로 분배**하는 시스템을 말한다.

<aside>
💡 **펌웨어(firmware)**
운영체제와 유사한 역할을 하지만 소프트웨어를 추가로 설치할 수 없는 것을 펌웨어라고 함. 일반적으로 ROM 메모리에 기록되어 있으며 보통 임베디드 시스템에서 많이 사용된다.

</aside>

## 운영체제의 역할

1. **CPU 스케줄링과 프로세스 관리**: CPU 소유권을 어떤 프로세스에 할당할지, 프로세스의 생성과 삭제, 자원할당 및 반환을 관리
2. **메모리 관리**: 한정된 메모리를 어떤 프로세스에 얼마큼 할당해야 하는지 관리
3. **디스크 파일 관리**: 디스크 파일을 어떤 방법으로 보관할지 관리
4. **입출력 디바이스 관리**: 마우스, 키보드와 같은 입출력 장치와 컴퓨터 간 데이터를 주고받는 것을 관리

## 운영체제 구조

![Untitled](%E1%84%8B%E1%85%AE%E1%86%AB%E1%84%8B%E1%85%A7%E1%86%BC%E1%84%8E%E1%85%A6%E1%84%8C%E1%85%A6%E1%84%8B%E1%85%AA%20%E1%84%8F%E1%85%A5%E1%86%B7%E1%84%91%E1%85%B2%E1%84%90%E1%85%A5%20720ead637e7f4c91afc6f21a6d96f4fe/Untitled.png)

운영체제는 `인터페이스`, `시스템콜`, `커널`, `드라이버`로 구성되어있으며 운영체제 위엔 응용프로그램이 있고 아래엔 하드웨어가 위치해있다. 

<aside>
💡 **드라이버**
하드웨어를 제어하기 위한 소프트웨어

</aside>

### 시스템콜

운영체제가 **커널에 접근하기 위한 인터페이스**를 말한다. 응용 프로그램이 어떤 작업을 하기 위해 **커널 함수를 호출할 때 사용**된다. 응용 프로그램의 요청으로 인한 트랩이 발동하면 올바른 요청인지 확인 후, `유저모드`가 시스템콜을 통해 `커널 모드`로 변환되어 실행된다. 시스템콜은 사용자가 컴퓨터 자원에 대해 직접 접근하는 것을 차단하며 프로그램을 다른 프로그램으로부터 보호해준다. 

시스템콜은 하나의 **추상화 계층**으로 네트워크 통신이나 DB와 같은 낮은 단계의 영역을 처리할 때 많은 신경을 쓰지 않고 프로그램을 구현할 수 있도록 해준다. 

![Untitled](%E1%84%8B%E1%85%AE%E1%86%AB%E1%84%8B%E1%85%A7%E1%86%BC%E1%84%8E%E1%85%A6%E1%84%8C%E1%85%A6%E1%84%8B%E1%85%AA%20%E1%84%8F%E1%85%A5%E1%86%B7%E1%84%91%E1%85%B2%E1%84%90%E1%85%A5%20720ead637e7f4c91afc6f21a6d96f4fe/Untitled%201.png)

<aside>
💡 **modebit**
시스템콜이 작동될 때 참고해서 유저 모드인지 커널 모드인지 구분하는 플래그 변수
유저모드에서 응용프로그램이 시스템 자원에 접근하지 않도록 막아줌

`0`: 커널 모드
`1`: 유저 모드

***유저 모드**: 사용자가 접근할 수 있는 영역을 제한하여 컴퓨터 자원에 함부로 접근하지 못하게 막는 모드
***커널 모드**: 모든 컴퓨터 자원에 접근할 수 있는 모드

</aside>

### 커널

> **Kernel(커널)**
[명사] **핵심**[알맹이]_어학사전
> 

커널은 사전적 의미로 “핵심”을 뜻한다. 운영 체제에서는 운영 체제의 **핵심이 되는 프로그램**으로 **시스템의 모든 것을 완전히 제어**할 수 있는 것을 의미한다. 시스템콜 인터페이스를 제공하며 보안, 메모리, 프로세스, 파일 시스템, 입출력 디바이스, 입출력 요청 관리 등 **운영체제의 중추적인 역할**을 한다.  

# 컴퓨터의 요소

컴퓨터는 `CPU`, `DMA 컨트롤러`, `메모리`, `타이머`, `디바이스 컨트롤러` 등으로 이루어져 있다. 

## CPU(Central Processiong Unit)

**중앙 처리 장치**(CPU)는 `산술논리연산장치(ALU)`, `제어장치`, `레지스터`로 구성되어 있는 컴퓨터 장치를 말하며, **인터럽트**에 의해 단순히 **메모리에 존재하는 명령어를 해석해서 실행**하는 역할을 한다. 

관리자 역할을 하는 커널이 프로그램을 메모리에 올려 프로세스로 만들면 CPU가 이를 처리한다. 

### **제어장치**

CPU의 제어장치(CU: Control Unit)는 프로세스 조작을 지시하는 부품이다. 입출력장치 간 통신을 제어하고 명령어를 읽고 해석하며 데이터 처리의 순서를 결정한다. 

### **레지스터**

레지스터는 CPU 안에 있는 임시기억장치로 CPU와 직접 연결되어 있어 연산 속도가 메모리보다 매우 빠르다. CPU는 자체적으로 데이터를 저장할 방법이 없기 때문에 레지스터를 거쳐 데이터를 전달한다.

### **산술논리연산장치**

산술논리연산장치(ALU: Arithmetic Logic Unit)는 덧셈, 뺄셈 같은 두 수의 **산술 연산**과 논리합, 논리곱 같은 **논리연산**을 계산하는 디지털 회로이다. 

### **CPU 연산처리 과정**

1. `제어장치`: 메모리와 레지스터에 계산할 값 로드
2. `제어장치`: 산술논리연산장치에 로드한 값 연산하라고 명령
3. `산술논리연산장치`: 레지스터에 있는 값을 계산
4. `제어장치`: 레지스터에 계산된 값을 메모리에 저장

### **인터럽트**

인터럽트는 **어떤 신호가 들어왔을 때, CPU를 잠시 정지시키는 것**을 말한다. 키보드, 마우스 등 입출력 장치로 인한 인터럽트, 산술 연산에서의 인터럽트, 프로세스 오류로 인한 인터럽트 등이 발생한다. 인터럽트는 HW인터럽트, SW인터럽트 두가지로 나뉜다. 

```bash
인터럽트 발생 -> 우선순위에 따라 인터럽트 핸들러 함수 실행
```

*인터럽트 핸들러 함수

인터럽트가 발생했을 때 이를 핸들링하기 위한 함수

**하드웨어 인터럽트**

키보드 연결, 마우스 연결 등 IO디바이스에서 발생하는 인터럽트를 말한다. 인터럽트 라인이 설계된 후 순차적인 인터럽트 실행을 중지하고 운영체제에 시스템콜을 요청해 원하는 디바이스의 로컬 버퍼에 접근하여 일을 수행한다. 

*로컬 버퍼
: 각 입출력 디바이스에서 데이터를 임시로 저장하기 위한 작은 메모리

**소프트웨어 인터럽트**

소프트웨어 인터럽트는 트랩(trap)이라고도 하며, 프로세스 오류 등 프로세스가 시스템콜을 호출할 때 발동한다.

## DMA 컨트롤러

`DMA`는 `Direct Memory Access`의 약자이다. 문자 그대로 직접 메모리에 접근한다는 의미인데, 입출력 장치가 CPU를 거치지 않고 메모리에 직접 접근하는 것을 뜻한다. 

DMA 컨트롤러는 **입출력 장치가 메모리에 직접 접근할 수 있도록 하는 하드웨어 장치**이며, CPU에만 너무 많은 인터럽트 요청이 들어와 CPU 부하가 걸리는 것을 막아준다. 또한 하나의 작업을 CPU와 DMA 컨트롤러가 동시에 하는 것을 방지한다. 

## 메모리

보통 `RAM(Random Access Memory)` 또는 `주기억장치`라고도 하며 전자회로에서 데이터나 상태, 명령어 등을 기록하는 장치를 말한다. CPU는 계산을 담당하고 메모리는 기억을 담당한다. 

## 타이머

타이머는 특정 프로그램에 시간 제한을 하는 역할을 한다. 시간이 많이 걸리는 프로그램이 작동할 때 제한을 걸기 위해 존재한다.

## 디바이스 컨트롤러

컴퓨터와 연결되어 있는 IO 디바이스들의 작은 CPU를 말한다. 또한 디바이스 컨트롤러 옆에 붙어있는 로컬 버퍼는 각 디바이스에서 데이터를 임시로 저장하기 위한 작은 메모리를 뜻한다.