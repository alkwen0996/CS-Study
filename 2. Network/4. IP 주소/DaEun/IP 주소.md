# IP 주소

<details>
<summary><h3>📑목차</h3></summary>
<div markdown="1">

- [ARP](#ARP)
  - [IP주소와 MAC주소](#IP주소와-MAC주소)
  - [ARP 동작 과정](#ARP-동작-과정)
- [홉바이홉 통신](#홉바이홉-통신)
  - [라우팅 테이블](#라우팅-테이블)
  - [게이트워이](#질문을-적어주세요2)
- [IP 주소 체계](#질문을-적어주세요3)
  - [클래스 기반 할당 방식](#질문을-적어주세요2)
  - [DHCP](#질문을-적어주세요2)
  - [NAT](#질문을-적어주세요2) 

</div>
</details>
<br>

## ARP

> **ARP(Address Resolution Protocol: 주소결정프로토콜)** <br>
> 네트워크 상에서 IP주소를 물리적 주소(MAC)로 대응시키기 위해 사용되는 프로토콜
>
> **RARP(Reverse Address Resolution Protocol: 역순주소결정프로토콜)** <br>
> MAC주소를 통해 IP주소를 알아내는 프로토콜

컴퓨터와 컴퓨터 사이 통신(host to host)은 `IP 주소`를 기반으로 통신한다. 정확히 말하면 `IP 주소`에서 `ARP`를 통해 `MAC 주소`를 찾아 통신한다. `ARP`는 IP 주소(가상 주소)를 MAC(실제 주소)로 변환해주는 프로토콜이다. 반대로 `RARP`는 MAC 주소(실제 주소)를 통해 IP 주소(가상 주소)를 알아낸다. 

```
ARP : IP 주소 → MAC 주소
RARP : MAC 주소 → IP 주소
```

<br>

### IP주소와 MAC주소
네트워크에서 장치 간 통신을 할 때, `IP주소`와 `MAC주소`를 서로 변환하는 과정이 왜 필요할까? 실제 **물리적 주소인 MAC주소는 고유한 주소**라는데 이 주소만 가지고 통신할 수 없을까? 만약 MAC주소만을 이용하여 인터넷 상에서 라우팅하며 통신을 한다면 라우팅 테이블의 모든 MAC주소가 입력되어야 할 것이고 로컬 네트워크에선 가능할 지 몰라도 인터넷 통신에선 매우 비효율적인, 사실상 통신이 불가할 것이다.

이러한 이유로 통신의 효율성을 위해 **가상 주소**를 사용해 통신하며 이를 `IP주소`라고 말한다. IP주소는 MAC주소와는 다르게 변경될 수 있으며 지역적 특성을 가지고 있는 IP를 따라 다른 네트워크에 속해있는 장치에게도 데이터를 전송할 수 있다. 결국, IP주소만을 보고 데이터가 이리 저리 이동하다가 수신 장치가 위치하는 근거리 네트워크 속에선 물리적 주소인 MAC 주소를 통해 최종적으로 데이터가 전달된다.

<br>

### ARP 동작 과정

1. IP프로토콜이 ARP프로토콜에게 ARP Request 메시지 생성 요청
2. ARP Request 메시지 **브로드캐스팅**
3. 해당 IP 주소에 해당하는 장치가 ARP Reply 메시지에 MAC 주소 담아 전송 **(유니캐스트)**
4. 최초 송신자, **물리적 주소 획득**

<p align="center">
    <img src="./img/ARP.png" width="400">
      <br>
    <small>출처: 면접을 위한 CS 전공지식 노트</small>
</p>

> 💡**브로드캐스트** <br>
>   송신 호스트가 전송한 데이터가 네트워크에 연결된 **모든 호스트에 전송**되는 방식
>
> 💡**유니캐스트** <br>
>   고유 주소로 식별된 하나의 네트워크 목적지에 **일대일로 데이터를 전송**하는 방식

<br><br>

## 홉바이홉 통신


IP주소를 통해 통신하는 과정을 **홉바이홉(hop by hop)통신**이라고 한다. 
네트워크에서 각 패킷이 여러 라우터를 건너가는 모습을 표현한 것으로, 
`홉(hop)`이란 **컴퓨터 네트워크에서 노드에서 다음 노드로 가는 경로**를 말한다.  
수많은 서브네트워크 안에 있는 라우터의 **라우팅 테이블의 IP를 기반**으로 패킷을 전달해나가며 최종 목적지까지 패킷을 전달한다.

<br>

### 라우팅 테이블

라우터에 들어가 있는 목적지 정보와 그 목적지로 가기 위한 방법이 들어있는 리스트를 말한다. 
라우팅 테이블에는 게이트웨이와 모든 목적지에 대해 **해당 목적지에 도달하기 위해 거쳐야 하는 다음 라우터 정보**를 가지고 있다. 

**라우터:** `패킷수신` → `다음 라우터 검색(라우팅 테이블)` → `패킷전송` → `패킷수신` →  ... 

<br>

> 💡**게이트 웨이 (gateway)** <br>
> 컴퓨터 네트워크에서 서로 다른 통신망, 프로토콜을 사용하는 네트워크 간의 통신을 가능하게 하는 컴퓨터나 소프트웨어를 두루 일컫는 용어
> <br>서로 다른 네트워크상의 통신 프로토콜을 변환해주는 역할
> <br>하나 이상의 프로토콜을 사용하여 통신한다는 면에서 라우터, 스위치와 구별
> <br>OSI 참조모델 중 어느 계층에서도 동작 가능 




