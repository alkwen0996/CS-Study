## 네트워크 기기와 처리 범위

---

### 계층 별 네트워크 기기

네트워크 기기는 계층별로 처리범위를 나눌 수 있다. 그리고 상위 계층을 처리하는 기기는 하위 계층을 처리할 수 있다. 하지만, 하위 계층을 처리하는 기기로는 상위 계층을 처리할 수 없다.

![1.png](/2.%20Network/3.%20%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC%20%EA%B8%B0%EA%B8%B0/MinSu/img/1.png)

<br><br>

## 애플리케이션 계층을 처리하는 기기

---

### L7 스위치

- 애플리케이션 계층(L7)에서 사용되는 네트워크 기기로 고급 로드 밸런싱과 트래픽 관리에 사용되는 스위치 장비이다. 클라이언트로부터 오는 요청들을 여러 서버로 분산시켜 시스템이 처리할 수 있는 트래픽을 관리한다. (L4 스위치보다 좀 더 세밀한 수준의 고급 로드 밸런싱과 트래픽관리가 가능하다.)
- TCP/UDP 패킷의 포트 정보뿐만 아니라 페이로드까지 분석해 로드밸런싱을 한다. 즉, 패킷의 내용(URL, 캐시, 쿠키)을 분석해 이를 기반으로 트래픽을 분산한다. 즉, 애플리케이션 계층 수준의 로드 밸런싱이 가능하다.
- 애플리케이션 수준에서 보안기능을 제공할 수 있다. 바이러스, 불필요한 외부 데이터 등을 걸러내는 필터링 기능 또한 가지고 있으며 응용 프로그램 수준의 트래픽 모니터링도 가능하다.
- 정기적으로 헬스체크를 이용하여 서버를 감시하며 장애가 발생한 서버가 있다면 트래픽 분산대상에서 제외할 수 있다.

> 💡 **스위치** <br>여러 장비를 연결하고 통신을 중재하며 목적지가 연결된 포트로만 전기 신호를 보내 데이터를 전송하는 통신 네트워크 장비이다. 데이터 링크 계층에서 동작하며 주로 이더넷 네트워크에서 사용된다.
>
> 또한, 여러 개의 네트워크 장치(컴퓨터, 서버, 프린터 등)를 연결하고 이들 간에 데이터 패킷을 전송하며 데이터의 흐름을 제어한다. 스위치는 주로 MAC 주소를 사용해 연결된 장치들을 식별하고 데이터를 전달한다.

<br>

### L4 스위치

- 전송계층(L4)에서 사용되는 기기로 로드밸런서 역할을 하는 스위치이다.
- L4 스위치는 주로 전송 계층의 헤더 정보를 분석하여 데이터 패킷을 처리하고 전송 방향을 결정한다. TCP/UDP 패킷의 정보를 분석해 데이터의 전송방향을 처리하는 것이다. 이때 주로 IP와 포트정보(특히 포트정보)를 활용한다.
- 패킷의 송수신을 모니터링하고 필요에 따라 트래픽을 제어한다. 예를 들어, 애플리케이션의 트래픽 패턴을 분석해 QoS 정책을 적용하거나, 특정 IP주소 혹은 포트로의 접근을 제어할 수 있다.
- 대규모 네트워크 환경에서 네트워크 성능을 향상하고 부하 분산을 위한 중요한 장치로 사용된다.

<br>

### L4 스위치와 L7 스위치 비교

![2.png](/2.%20Network/3.%20%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC%20%EA%B8%B0%EA%B8%B0/MinSu/img/2.png)

<br>

> 💡 **헬스 체크** <br>정상적인 서버와 비정상적인 서버를 판별하기 위해 전송 주기와 재전송 횟수 등을 설정한 이후 반복적으로 서버에 요청을 보내는 것을 말한다.
>
> 주의할 점은 서버에 부하가 되지 않을 만큼 요청 횟수가 적절해야 한다는 점이다. 이때 요청은 TCP, HTTP등 다양한 방법으로 보낼 수 있으며 요청이 정상적으로 이루어졌다면 정상적인 서버로 판별한다.

<br>

> 💡 **로드밸런서** <br>서버에 가해지는 부하를 분산시켜주는 장치이다.<br>
>
> 로드밸런서의 대표적인 기능으로 서버 이중화를 들 수 있다. 서비스를 안정적으로 운용하기 위해서는 2개의 서버가 필요하다. 에러가 발생하여 서버 1대가 종료되더라도 서비스는 안정적으로 운용되어야 하기 때문이다.
>
> 로드 밸런서는 2대 이상의 서버를 기반으로 가상 IP를 제공하고 이를 기반으로 안정적인 서비스를 제공한다. 사용자들은 로드밸런서가 제공한 가상 IP에 접근하고 로드밸런서는 사용이 가능한 서버로 사용자들의 요청을 전송한다. 이를 통해 서버에 장애가 발생해도 안정적인 서비스를 운용할 수 있다.
>
> 이런 부하를 분산시키는 로드밸런싱 기술은 여러대의 서버를 두고 서비스를 제공하는 분산 처리 시스템에서 주로 필요로 한다.

<br><br>

## 인터넷 계층을 처리하는 기기(라우터, L3 스위치)

---

### 라우터

여러개의 네트워크를 연결, 분할, 구분시켜주는 역할을 하며 **다른 네트워크에 존재하는 장치끼리 서로 데이터를 주고받을 때 패킷 소모를 최소화하고 경로를 최적화하여 최소 경로로 패킷을 포워딩**하는 장비이다.

<br>

### L3 스위치

**L2 스위치의 기능과 라우팅 기능을 갖춘 장비를 말한다.** L3 스위치를 라우터라고 할 수도 있다. 라우터는 소프트웨어 기반의 라우팅과 하드웨어 기반의 라우팅을 하는 것으로 나누어지는데 여기서 **하드웨어 기반의 라우팅을 담당하는 장치를 L3 스위치**라고 한다.

<br>

### L3 스위치와 L2 스위치 비교

![3.png](/2.%20Network/3.%20%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC%20%EA%B8%B0%EA%B8%B0/MinSu/img/3.png)

<br><br>

## 데이터 링크 계층을 처리하는 기기(L2 스위치, 브리지)

---

### L2 스위치

장치들의 MAC 주소를 MAC 주소 테이블을 통해 관리하며, 연결된 장치로부터 패킷이 왔을 때 패킷 전송을 담당한다. IP 주소를 이해하지못하므로 IP 주소를 기반으로 한 라우팅이 불가능하며 단순히 패킷의 MAC 주소를 읽어 스위칭하는 역할을 한다. 목적지가 MAC주소 테이블에 없다면 전체 포트에 전달하고 MAC 주소 테이블의 주소는 일정 시간 이후에 삭제하는 기능도 있다.

<br>

### 브리지

두 개의 근거리 통신망(LAN)을 상호 접속할 수 있도록 하는 통신망 연결 장치로, 포트와 포트 사이의 다리 역할을 하며 장치에서 받아온 MAC 주소를 MAC 주소 테이블로 관리한다.

<br><br>

## 물리 계층을 처리하는 기기(NIC, 리피터, AC)

---

### NIC(Network Interface Card)

LAN 카드라고 하는 네트워크 인터페이스 카드는 2대 이상의 컴퓨터 네트워크를 구성하는데 사용하며, 네트워크와 빠른 속도로 데이터를 송수신할 수 있도록 컴퓨터내에 설치하는 확장카드이다. **각 LAN 카드에는 고유의 식별번호인 MAC 주소**가 있다.

<br>

### 리피터

들어오는 약해진 신호 정도를 증폭하여 다른 쪽으로 전달하는 장치를 말한다. 광케이블 보급에 따라 현재는 잘 쓰이지 않는다.

<br>

### AP(Access Point)

패킷을 복사하는 기기이다. AP에 유선 LAN을 연결한 후 다른 장치에서 무선 LAN기술(와이파이 등)을 사용하여 무선 네트워크 연결을 할 수 있다.
